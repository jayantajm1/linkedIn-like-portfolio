<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Visitor Analytics Dashboard - Jayanta Mardi</title>
    <link rel="icon" href="assets/images/index.jpg" type="image/x-icon" />

    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />

    <!-- Google Fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
      rel="stylesheet"
    />

    <!-- Chart.js for Analytics -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

    <!-- Dashboard Styles -->
    <link rel="stylesheet" href="assets/css/dashboard.css" />
  </head>
  <body>
    <!-- Password Protection Modal -->
    <div id="authModal" class="auth-modal">
      <div class="auth-content">
        <div class="auth-header">
          <i class="fas fa-shield-alt"></i>
          <h2>Dashboard Access</h2>
          <p>Enter password to view analytics</p>
        </div>
        <form id="authForm">
          <div class="input-group">
            <i class="fas fa-lock"></i>
            <input
              type="password"
              id="dashboardPassword"
              placeholder="Enter password"
              required
            />
          </div>
          <button type="submit" class="auth-btn">
            <i class="fas fa-sign-in-alt"></i>
            Access Dashboard
          </button>
          <p class="error-message" id="errorMessage"></p>
        </form>
        <div class="auth-footer">
          <a href="index.html">
            <i class="fas fa-arrow-left"></i>
            Back to Portfolio
          </a>
        </div>
      </div>
    </div>

    <!-- Main Dashboard Content -->
    <div
      id="dashboardContent"
      class="dashboard-container"
      style="display: none"
    >
      <!-- Navigation Sidebar -->
      <nav class="dashboard-nav">
        <div class="nav-header">
          <div class="nav-logo">
            <i class="fas fa-chart-line"></i>
            <span>Analytics</span>
          </div>
          <button class="nav-toggle" onclick="toggleNav()">
            <i class="fas fa-bars"></i>
          </button>
        </div>

        <ul class="nav-menu">
          <li class="nav-item active" data-page="overview">
            <a href="#overview" onclick="navigateTo('overview', event)">
              <i class="fas fa-home"></i>
              <span>Overview</span>
            </a>
          </li>
          <li class="nav-item" data-page="visitors">
            <a href="#visitors" onclick="navigateTo('visitors', event)">
              <i class="fas fa-users"></i>
              <span>Visitors</span>
            </a>
          </li>
          <li class="nav-item" data-page="analytics">
            <a href="#analytics" onclick="navigateTo('analytics', event)">
              <i class="fas fa-chart-bar"></i>
              <span>Analytics</span>
            </a>
          </li>
          <li class="nav-item" data-page="reports">
            <a href="#reports" onclick="navigateTo('reports', event)">
              <i class="fas fa-file-alt"></i>
              <span>Reports</span>
            </a>
          </li>
          <li class="nav-item" data-page="settings">
            <a href="#settings" onclick="navigateTo('settings', event)">
              <i class="fas fa-cog"></i>
              <span>Settings</span>
            </a>
          </li>
        </ul>

        <div class="nav-footer">
          <div class="user-info">
            <i class="fas fa-user-circle"></i>
            <div class="user-details">
              <p class="user-name">Admin</p>
              <p class="user-role">Dashboard Owner</p>
            </div>
          </div>
          <button class="logout-btn-nav" onclick="logout()">
            <i class="fas fa-sign-out-alt"></i>
            <span>Logout</span>
          </button>
        </div>
      </nav>

      <!-- Main Content Area -->
      <div class="dashboard-main">
        <!-- Top Header Bar -->
        <header class="dashboard-header">
          <div class="header-left">
            <h1 id="pageTitle">
              <i class="fas fa-chart-line"></i> Dashboard Overview
            </h1>
            <p id="pageSubtitle">
              Real-time insights into your portfolio visitors
            </p>
          </div>
          <div class="header-right">
            <button class="refresh-btn" onclick="refreshData()">
              <i class="fas fa-sync-alt"></i>
              Refresh
            </button>
            <button class="export-btn" onclick="exportData()">
              <i class="fas fa-download"></i>
              Export
            </button>
          </div>
        </header>

        <!-- Overview Page -->
        <div id="page-overview" class="page-content active">
          <!-- Stats Overview -->
          <div class="stats-grid">
            <div class="stat-card">
              <div class="stat-icon visitors">
                <i class="fas fa-users"></i>
              </div>
              <div class="stat-info">
                <h3 id="totalVisitors">0</h3>
                <p>Total Visitors</p>
                <span class="stat-change positive" id="visitorsChange"
                  >+0%</span
                >
              </div>
            </div>

            <div class="stat-card">
              <div class="stat-icon pageviews">
                <i class="fas fa-eye"></i>
              </div>
              <div class="stat-info">
                <h3 id="totalPageViews">0</h3>
                <p>Page Views</p>
                <span class="stat-change positive" id="pageviewsChange"
                  >+0%</span
                >
              </div>
            </div>

            <div class="stat-card">
              <div class="stat-icon time">
                <i class="fas fa-clock"></i>
              </div>
              <div class="stat-info">
                <h3 id="avgTime">0m 0s</h3>
                <p>Avg. Time on Site</p>
                <span class="stat-change" id="timeChange">--</span>
              </div>
            </div>

            <div class="stat-card">
              <div class="stat-icon countries">
                <i class="fas fa-globe"></i>
              </div>
              <div class="stat-info">
                <h3 id="totalCountries">0</h3>
                <p>Countries</p>
                <span class="stat-change" id="countriesChange">--</span>
              </div>
            </div>
          </div>

          <!-- Charts Section -->
          <div class="charts-grid">
            <div class="chart-card">
              <div class="chart-header">
                <h3><i class="fas fa-chart-area"></i> Visitors Over Time</h3>
                <select id="timeRange" onchange="updateCharts()">
                  <option value="7">Last 7 Days</option>
                  <option value="30">Last 30 Days</option>
                  <option value="90">Last 90 Days</option>
                </select>
              </div>
              <canvas id="visitorsChart"></canvas>
            </div>

            <div class="chart-card">
              <div class="chart-header">
                <h3><i class="fas fa-map-marker-alt"></i> Top Locations</h3>
              </div>
              <canvas id="locationsChart"></canvas>
            </div>
          </div>

          <!-- Data Tables Section -->
          <div class="tables-grid">
            <!-- Recent Visitors Table -->
            <div class="table-card">
              <div class="table-header">
                <h3><i class="fas fa-user-clock"></i> Recent Visitors</h3>
                <input
                  type="text"
                  id="searchVisitors"
                  placeholder="Search visitors..."
                  onkeyup="filterVisitors()"
                />
              </div>
              <div class="table-wrapper">
                <table id="visitorsTable">
                  <thead>
                    <tr>
                      <th>Time</th>
                      <th>Location</th>
                      <th>Device</th>
                      <th>Browser</th>
                      <th>Referrer</th>
                      <th>Duration</th>
                    </tr>
                  </thead>
                  <tbody id="visitorsTableBody">
                    <!-- Populated by JavaScript -->
                  </tbody>
                </table>
              </div>
            </div>

            <!-- Traffic Sources -->
            <div class="table-card">
              <div class="table-header">
                <h3><i class="fas fa-share-alt"></i> Traffic Sources</h3>
              </div>
              <div class="table-wrapper">
                <table id="sourcesTable">
                  <thead>
                    <tr>
                      <th>Source</th>
                      <th>Visitors</th>
                      <th>Percentage</th>
                    </tr>
                  </thead>
                  <tbody id="sourcesTableBody">
                    <!-- Populated by JavaScript -->
                  </tbody>
                </table>
              </div>
            </div>
          </div>

          <!-- Device & Browser Stats -->
          <div class="device-stats">
            <div class="stat-section">
              <h3><i class="fas fa-mobile-alt"></i> Device Breakdown</h3>
              <div id="deviceStats" class="device-list">
                <!-- Populated by JavaScript -->
              </div>
            </div>

            <div class="stat-section">
              <h3><i class="fas fa-browser"></i> Browser Breakdown</h3>
              <div id="browserStats" class="browser-list">
                <!-- Populated by JavaScript -->
              </div>
            </div>
          </div>

          <!-- Map Visualization (Optional - requires additional library) -->
          <div class="map-card">
            <div class="chart-header">
              <h3><i class="fas fa-map"></i> Visitor Map</h3>
            </div>
            <div id="visitorMap" class="map-container">
              <p class="map-placeholder">
                <i class="fas fa-map-marked-alt"></i>
                Map visualization will appear here
              </p>
            </div>
          </div>
        </div>
        <!-- End Overview Page -->

        <!-- Visitors Page -->
        <div id="page-visitors" class="page-content">
          <div class="page-header">
            <h2><i class="fas fa-users"></i> Visitor Details</h2>
            <p>Comprehensive visitor tracking and analysis</p>
          </div>

          <!-- Visitor Filters -->
          <div class="filter-section">
            <div class="filter-group">
              <label><i class="fas fa-filter"></i> Filter By:</label>
              <select id="filterDevice" onchange="applyFilters()">
                <option value="">All Devices</option>
                <option value="Mobile">Mobile</option>
                <option value="Desktop">Desktop</option>
                <option value="Tablet">Tablet</option>
              </select>
              <select id="filterCountry" onchange="applyFilters()">
                <option value="">All Countries</option>
              </select>
              <input
                type="date"
                id="filterDate"
                onchange="applyFilters()"
                placeholder="Filter by date"
              />
            </div>
          </div>

          <!-- Visitors Table (Reused from Overview) -->
          <div class="table-card">
            <div class="table-header">
              <h3><i class="fas fa-user-clock"></i> All Visitors</h3>
              <input
                type="text"
                id="searchVisitorsPage"
                placeholder="Search visitors..."
                onkeyup="filterVisitors()"
              />
            </div>
            <div class="table-wrapper">
              <table id="visitorsTablePage">
                <thead>
                  <tr>
                    <th>Time</th>
                    <th>Location</th>
                    <th>Device</th>
                    <th>Browser</th>
                    <th>Referrer</th>
                    <th>Duration</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody id="visitorsTableBodyPage">
                  <!-- Populated by JavaScript -->
                </tbody>
              </table>
            </div>
          </div>
        </div>
        <!-- End Visitors Page -->

        <!-- Analytics Page -->
        <div id="page-analytics" class="page-content">
          <div class="page-header">
            <h2><i class="fas fa-chart-bar"></i> Advanced Analytics</h2>
            <p>Deep insights into visitor behavior and trends</p>
          </div>

          <!-- Analytics Charts Grid -->
          <div class="analytics-grid">
            <div class="chart-card">
              <div class="chart-header">
                <h3><i class="fas fa-clock"></i> Peak Hours</h3>
              </div>
              <canvas id="peakHoursChart"></canvas>
            </div>

            <div class="chart-card">
              <div class="chart-header">
                <h3><i class="fas fa-calendar-alt"></i> Weekly Trends</h3>
              </div>
              <canvas id="weeklyTrendsChart"></canvas>
            </div>

            <div class="chart-card">
              <div class="chart-header">
                <h3><i class="fas fa-mobile-alt"></i> Device Distribution</h3>
              </div>
              <canvas id="deviceDistributionChart"></canvas>
            </div>

            <div class="chart-card">
              <div class="chart-header">
                <h3><i class="fas fa-globe"></i> Browser Market Share</h3>
              </div>
              <canvas id="browserMarketChart"></canvas>
            </div>
          </div>

          <!-- Engagement Metrics -->
          <div class="engagement-section">
            <h3><i class="fas fa-heartbeat"></i> Engagement Metrics</h3>
            <div class="metrics-grid">
              <div class="metric-card">
                <i class="fas fa-mouse-pointer"></i>
                <h4>Avg. Clicks per Session</h4>
                <p id="avgClicks">0</p>
              </div>
              <div class="metric-card">
                <i class="fas fa-arrows-alt-v"></i>
                <h4>Avg. Scroll Depth</h4>
                <p id="avgScroll">0%</p>
              </div>
              <div class="metric-card">
                <i class="fas fa-redo"></i>
                <h4>Bounce Rate</h4>
                <p id="bounceRate">0%</p>
              </div>
              <div class="metric-card">
                <i class="fas fa-user-check"></i>
                <h4>Return Visitors</h4>
                <p id="returnVisitors">0%</p>
              </div>
            </div>
          </div>
        </div>
        <!-- End Analytics Page -->

        <!-- Reports Page -->
        <div id="page-reports" class="page-content">
          <div class="page-header">
            <h2><i class="fas fa-file-alt"></i> Reports & Exports</h2>
            <p>Generate and download detailed reports</p>
          </div>

          <div class="reports-grid">
            <div class="report-card">
              <div class="report-icon">
                <i class="fas fa-file-pdf"></i>
              </div>
              <h3>PDF Report</h3>
              <p>Generate a comprehensive PDF report with all analytics</p>
              <button class="btn-generate" onclick="generatePDFReport()">
                <i class="fas fa-file-pdf"></i> Generate PDF
              </button>
            </div>

            <div class="report-card">
              <div class="report-icon">
                <i class="fas fa-file-csv"></i>
              </div>
              <h3>CSV Export</h3>
              <p>Export visitor data in CSV format for Excel/Sheets</p>
              <button class="btn-generate" onclick="exportCSV()">
                <i class="fas fa-file-csv"></i> Export CSV
              </button>
            </div>

            <div class="report-card">
              <div class="report-icon">
                <i class="fas fa-file-code"></i>
              </div>
              <h3>JSON Export</h3>
              <p>Download raw data in JSON format for developers</p>
              <button class="btn-generate" onclick="exportData()">
                <i class="fas fa-file-code"></i> Export JSON
              </button>
            </div>

            <div class="report-card">
              <div class="report-icon">
                <i class="fas fa-envelope"></i>
              </div>
              <h3>Email Report</h3>
              <p>Send weekly analytics summary to your email</p>
              <button class="btn-generate" onclick="setupEmailReports()">
                <i class="fas fa-envelope"></i> Setup Email
              </button>
            </div>
          </div>

          <!-- Report History -->
          <div class="table-card">
            <div class="table-header">
              <h3><i class="fas fa-history"></i> Report History</h3>
            </div>
            <div class="report-history">
              <p class="empty-state">
                <i class="fas fa-inbox"></i>
                No reports generated yet. Create your first report above!
              </p>
            </div>
          </div>
        </div>
        <!-- End Reports Page -->

        <!-- Settings Page -->
        <div id="page-settings" class="page-content">
          <div class="page-header">
            <h2><i class="fas fa-cog"></i> Dashboard Settings</h2>
            <p>Customize your analytics dashboard</p>
          </div>

          <div class="settings-grid">
            <!-- Account Settings -->
            <div class="settings-card">
              <h3><i class="fas fa-user-cog"></i> Account Settings</h3>
              <div class="setting-item">
                <label>Dashboard Password</label>
                <div class="input-group">
                  <input
                    type="password"
                    id="newPassword"
                    placeholder="Enter new password"
                  />
                  <button onclick="changePassword()">Update</button>
                </div>
              </div>
              <div class="setting-item">
                <label>Email Notifications</label>
                <div class="toggle-group">
                  <label class="toggle-switch">
                    <input type="checkbox" id="emailNotifications" />
                    <span class="toggle-slider"></span>
                  </label>
                  <span>Receive daily visitor reports</span>
                </div>
              </div>
            </div>

            <!-- Data Settings -->
            <div class="settings-card">
              <h3><i class="fas fa-database"></i> Data Management</h3>
              <div class="setting-item">
                <label>Storage Option</label>
                <select id="storageOption">
                  <option value="localStorage">LocalStorage (Default)</option>
                  <option value="firebase">Firebase Cloud</option>
                  <option value="custom">Custom API</option>
                </select>
              </div>
              <div class="setting-item">
                <label>Data Retention</label>
                <select id="dataRetention">
                  <option value="30">30 Days</option>
                  <option value="60">60 Days</option>
                  <option value="90">90 Days</option>
                  <option value="365">1 Year</option>
                  <option value="-1">Forever</option>
                </select>
              </div>
              <div class="setting-item">
                <button class="btn-danger" onclick="clearAllData()">
                  <i class="fas fa-trash"></i> Clear All Data
                </button>
              </div>
            </div>

            <!-- Display Settings -->
            <div class="settings-card">
              <h3><i class="fas fa-paint-brush"></i> Display Settings</h3>
              <div class="setting-item">
                <label>Theme</label>
                <select id="themeSelect" onchange="changeTheme()">
                  <option value="light">Light Theme</option>
                  <option value="dark">Dark Theme</option>
                  <option value="auto">Auto (System)</option>
                </select>
              </div>
              <div class="setting-item">
                <label>Default Time Range</label>
                <select id="defaultTimeRange">
                  <option value="7">Last 7 Days</option>
                  <option value="30">Last 30 Days</option>
                  <option value="90">Last 90 Days</option>
                </select>
              </div>
              <div class="setting-item">
                <label>Auto-refresh Data</label>
                <div class="toggle-group">
                  <label class="toggle-switch">
                    <input type="checkbox" id="autoRefresh" />
                    <span class="toggle-slider"></span>
                  </label>
                  <span>Refresh every 5 minutes</span>
                </div>
              </div>
            </div>

            <!-- Privacy Settings -->
            <div class="settings-card">
              <h3><i class="fas fa-shield-alt"></i> Privacy & Security</h3>
              <div class="setting-item">
                <label>Track IP Addresses</label>
                <div class="toggle-group">
                  <label class="toggle-switch">
                    <input type="checkbox" id="trackIP" checked />
                    <span class="toggle-slider"></span>
                  </label>
                  <span>Store visitor IP information</span>
                </div>
              </div>
              <div class="setting-item">
                <label>Track Location</label>
                <div class="toggle-group">
                  <label class="toggle-switch">
                    <input type="checkbox" id="trackLocation" checked />
                    <span class="toggle-slider"></span>
                  </label>
                  <span>Store geographic location data</span>
                </div>
              </div>
              <div class="setting-item">
                <label>GDPR Compliance</label>
                <div class="toggle-group">
                  <label class="toggle-switch">
                    <input type="checkbox" id="gdprMode" />
                    <span class="toggle-slider"></span>
                  </label>
                  <span>Enable GDPR compliant mode</span>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- End Settings Page -->
      </div>
      <!-- End Main Content -->
    </div>
    <!-- End Dashboard Container -->

    <!-- Loading Spinner -->
    <div id="loadingSpinner" class="spinner" style="display: none">
      <i class="fas fa-spinner fa-spin"></i>
      <p>Loading data...</p>
    </div>

    <!-- Scripts -->
    <script src="assets/js/dashboard.js"></script>
  </body>
</html>
